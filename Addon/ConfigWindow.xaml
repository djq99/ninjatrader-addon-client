<Window x:Class="NT8Bridge.Addon.ConfigWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="NT8Bridge Configuration" Height="600" Width="800"
        WindowStartupLocation="CenterScreen"
        Background="#F0F0F0">
    
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,10">
            <TextBlock Text="NT8Bridge Configuration" FontSize="18" FontWeight="Bold" Margin="0,0,0,5"/>
            <TextBlock Text="High-performance data &amp; execution gateway for external strategies" FontSize="12" Foreground="Gray"/>
        </StackPanel>

        <!-- Tab Control -->
        <TabControl Grid.Row="1" Background="White">
            
            <!-- Connection Tab -->
            <TabItem Header="Connection">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Server Status -->
                    <GroupBox Grid.Row="0" Header="Server Status" Margin="0,0,0,10">
                        <Grid Margin="5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Column="0" Text="Status:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                            <TextBlock x:Name="StatusText" Grid.Column="1" Text="Stopped" VerticalAlignment="Center" FontWeight="Bold"/>
                            <Button x:Name="StartStopButton" Grid.Column="2" Content="Start Server" Width="100" Click="StartStopButton_Click"/>
                        </Grid>
                    </GroupBox>

                    <!-- Connection Settings -->
                    <GroupBox Grid.Row="1" Header="Connection Settings" Margin="0,0,0,10">
                        <Grid Margin="5">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Port:" VerticalAlignment="Center"/>
                            <TextBox x:Name="PortTextBox" Grid.Row="0" Grid.Column="1" Text="36973" Margin="5,0,0,0"/>

                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Protocol:" VerticalAlignment="Center" Margin="0,5,0,0"/>
                            <ComboBox x:Name="ProtocolComboBox" Grid.Row="1" Grid.Column="1" Margin="5,5,0,0">
                                <ComboBoxItem Content="TCP + WebSocket" IsSelected="True"/>
                                <ComboBoxItem Content="TCP Only"/>
                                <ComboBoxItem Content="WebSocket Only"/>
                            </ComboBox>

                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Auth Type:" VerticalAlignment="Center" Margin="0,5,0,0"/>
                            <ComboBox x:Name="AuthComboBox" Grid.Row="2" Grid.Column="1" Margin="5,5,0,0">
                                <ComboBoxItem Content="None" IsSelected="True"/>
                                <ComboBoxItem Content="Shared Secret"/>
                                <ComboBoxItem Content="JWT"/>
                            </ComboBox>
                        </Grid>
                    </GroupBox>

                    <!-- Connected Clients -->
                    <GroupBox Grid.Row="2" Header="Connected Clients" Margin="0,0,0,10">
                        <Grid Margin="5">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,5">
                                <TextBlock Text="Active Clients:" VerticalAlignment="Center"/>
                                <TextBlock x:Name="ClientCountText" Text="0" FontWeight="Bold" Margin="5,0,0,0" VerticalAlignment="Center"/>
                                <Button x:Name="RefreshClientsButton" Content="Refresh" Margin="10,0,0,0" Click="RefreshClientsButton_Click"/>
                            </StackPanel>

                            <ListBox x:Name="ClientsListBox" Grid.Row="1" Height="100"/>
                        </Grid>
                    </GroupBox>

                    <!-- Log -->
                    <GroupBox Grid.Row="3" Header="Server Log">
                        <TextBox x:Name="LogTextBox" IsReadOnly="True" VerticalScrollBarVisibility="Auto" FontFamily="Consolas" FontSize="10"/>
                    </GroupBox>
                </Grid>
            </TabItem>

            <!-- Symbols Tab -->
            <TabItem Header="Symbols">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Symbol Management -->
                    <GroupBox Grid.Row="0" Header="Symbol Management" Margin="0,0,0,10">
                        <Grid Margin="5">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Row="0" Grid.Column="0">
                                <TextBlock Text="Add Symbol:" Margin="0,0,0,5"/>
                                <TextBox x:Name="SymbolTextBox" Text="NQ 09-25" Margin="0,0,0,5"/>
                            </StackPanel>

                            <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Vertical" Margin="10,0,0,0">
                                <Button x:Name="AddSymbolButton" Content="Add" Width="80" Click="AddSymbolButton_Click"/>
                                <Button x:Name="RemoveSymbolButton" Content="Remove" Width="80" Margin="0,5,0,0" Click="RemoveSymbolButton_Click"/>
                            </StackPanel>

                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Subscribed Symbols:" Margin="0,10,0,5"/>
                        </Grid>
                    </GroupBox>

                    <!-- Symbol List -->
                    <GroupBox Grid.Row="1" Header="Active Symbols">
                        <ListBox x:Name="SymbolsListBox" SelectionMode="Extended"/>
                    </GroupBox>
                </Grid>
            </TabItem>

            <!-- Indicators Tab -->
            <TabItem Header="Indicators">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Indicator Management -->
                    <GroupBox Grid.Row="0" Header="Indicator Management" Margin="0,0,0,10">
                        <Grid Margin="5">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Row="0" Grid.Column="0">
                                <TextBlock Text="Available Indicators:" Margin="0,0,0,5"/>
                                <ComboBox x:Name="IndicatorComboBox" Margin="0,0,0,5">
                                    <ComboBoxItem Content="SMA" IsSelected="True"/>
                                    <ComboBoxItem Content="EMA"/>
                                    <ComboBoxItem Content="RSI"/>
                                    <ComboBoxItem Content="MACD"/>
                                    <ComboBoxItem Content="VWAP"/>
                                    <ComboBoxItem Content="Bollinger"/>
                                    <ComboBoxItem Content="ATR"/>
                                    <ComboBoxItem Content="Stochastics"/>
                                    <ComboBoxItem Content="WilliamsR"/>
                                    <ComboBoxItem Content="CCI"/>
                                </ComboBox>
                            </StackPanel>

                            <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Vertical" Margin="10,0,0,0">
                                <Button x:Name="AddIndicatorButton" Content="Add" Width="80" Click="AddIndicatorButton_Click"/>
                                <Button x:Name="RemoveIndicatorButton" Content="Remove" Width="80" Margin="0,5,0,0" Click="RemoveIndicatorButton_Click"/>
                            </StackPanel>

                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Active Indicators:" Margin="0,10,0,5"/>
                        </Grid>
                    </GroupBox>

                    <!-- Indicator List -->
                    <GroupBox Grid.Row="1" Header="Active Indicators">
                        <ListBox x:Name="IndicatorsListBox" SelectionMode="Extended"/>
                    </GroupBox>
                </Grid>
            </TabItem>

            <!-- Diagnostics Tab -->
            <TabItem Header="Diagnostics">
                <Grid Margin="10">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Performance Metrics -->
                    <GroupBox Grid.Row="0" Header="Performance Metrics" Margin="0,0,0,10">
                        <Grid Margin="5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Round-trip Latency:" FontWeight="Bold"/>
                                <TextBlock x:Name="LatencyText" Text="0 ms" FontSize="16"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1">
                                <TextBlock Text="Messages/sec:" FontWeight="Bold"/>
                                <TextBlock x:Name="MessagesPerSecText" Text="0" FontSize="16"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Memory Usage:" FontWeight="Bold"/>
                                <TextBlock x:Name="MemoryText" Text="0 MB" FontSize="16"/>
                            </StackPanel>
                        </Grid>
                    </GroupBox>

                    <!-- System Info -->
                    <GroupBox Grid.Row="1" Header="System Information" Margin="0,0,0,10">
                        <Grid Margin="5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Server Uptime:" FontWeight="Bold"/>
                                <TextBlock x:Name="UptimeText" Text="00:00:00"/>
                                <TextBlock Text="Total Connections:" FontWeight="Bold" Margin="0,10,0,0"/>
                                <TextBlock x:Name="TotalConnectionsText" Text="0"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1">
                                <TextBlock Text="Cache Hit Rate:" FontWeight="Bold"/>
                                <TextBlock x:Name="CacheHitRateText" Text="0%"/>
                                <TextBlock Text="Active Subscriptions:" FontWeight="Bold" Margin="0,10,0,0"/>
                                <TextBlock x:Name="ActiveSubscriptionsText" Text="0"/>
                            </StackPanel>
                        </Grid>
                    </GroupBox>

                    <!-- Latency Chart -->
                    <GroupBox Grid.Row="2" Header="Latency Chart">
                        <Canvas x:Name="LatencyChart" Background="White"/>
                    </GroupBox>
                </Grid>
            </TabItem>
        </TabControl>

        <!-- Footer -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button x:Name="SaveButton" Content="Save Configuration" Width="120" Margin="0,0,10,0" Click="SaveButton_Click"/>
            <Button x:Name="CloseButton" Content="Close" Width="80" Click="CloseButton_Click"/>
        </StackPanel>
    </Grid>
</Window> 